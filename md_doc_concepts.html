<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DLite: Concepts</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DLite
   &#160;<span id="projectnumber">0.3.11</span>
   </div>
   <div id="projectbrief">A lightweight data-centric framework for semantic interoperability</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Concepts </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>dlite shares the <a href="https://github.com/NanoSim/Porto/blob/porto/Preview-Final-Release/doc/manual/02_soft_introduction.md#soft5-features">metadata model of SOFT</a> and generic data stored with SOFT can be read with dlite and vice verse. However, apart from dlite being much smaller and less complete, there are also a few notable differences in the API and even conceptual, which are detailed below.</p>
<h1>Named data instances </h1>
<p>In SOFT all Entity instances are referred to by their UUID. However, in some cases when you have unique and immutable data, e.g. default input parameters to a given version of a software model, it may be more convenient to refer to an unique human understandable name (URI), like "mymodel-1.2.3_default_input", rather than a UUID on the form "8290318f-258e-54e2-9838-bb187881f996". dlite supports this. The tool <code>dlite-getuuid</code> can be used to manually convert URIs to their corresponding UUIDs.</p>
<p>If the <code>id</code> provided to <a class="el" href="dlite-datamodel_8h.html#af1108f38e51b4988b306b58c148916d2">dlite_datamodel()</a> or <a class="el" href="dlite-entity_8h.html#ad2c8708c7c3428dc1f83c7cac908974b">dlite_instance_create()</a> is not <code>NULL</code> or a valid UUID, it is interpreted as an unique uri referring to the instance. dlite will then generate a version 5 UUID from the <code>id</code> (from the SHA-1 hash of <code>id</code> and the DNS namespace) that the instance will be stored under. The original <code>id</code> will also be stored and can be retrieved with <a class="el" href="dlite-datamodel_8h.html#a35a79dd06e997200fa1e4b857a95323a">dlite_datamodel_get_meta_uri()</a>.</p>
<h1>Simple unified access to all data types </h1>
<p>The datamodel API for accessing properties of an instance in SOFT, has separate getters and setters for each type and number of dimensions. dlite generalize and simplifies this by describing types and dimensionality of properties with 4 parameters:</p>
<ul>
<li><code>type</code>: an enum defining the type of the data item (or items if it has dimensions), e.g. whether it is an integer, float or string... The table below summarises the implemented dtype's.</li>
<li><code>size</code>: the size of a data item in bytes.</li>
<li><code>ndims</code>: number of dimensions. Scalars has <code>ndims=0</code>.</li>
<li><code>dims</code>: array of length <code>ndims</code> with the length of each dimension.</li>
</ul>
<p>By taking these parameters as arguments, the functions <a class="el" href="dlite-datamodel_8h.html#a0d7386fe05b164c4517b0dafa0c2cb7b">dlite_datamodel_get_property()</a> and <a class="el" href="dlite-datamodel_8h.html#a2191c4cce5514c52df3c2335929ecd1b">dlite_datamodel_set_property()</a> can handle all supported property types. No storage strategy is needed.</p>
<p>The table below summarises the different dtypes defined in dlite. For more details, see <a class="el" href="dlite-type_8h.html" title="Data types for instance properties.">dlite-type.h</a>. Also note that this supports arbitrary dimensional arrays. All arrays are assumed to be continuous in memory in C-order. dlite has currently no api for working with arrays as pointers to pointers.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">type </th><th class="markdownTableHeadNone">dtype </th><th class="markdownTableHeadNone">sizes </th><th class="markdownTableHeadNone">description </th><th class="markdownTableHeadNone">examples  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">blob </td><td class="markdownTableBodyNone">dliteBlob </td><td class="markdownTableBodyNone">any </td><td class="markdownTableBodyNone">binary blob, sequence of bytes </td><td class="markdownTableBodyNone">blob32, blob128, ...  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">bool </td><td class="markdownTableBodyNone">dliteBool </td><td class="markdownTableBodyNone">sizeof(bool) </td><td class="markdownTableBodyNone">boolean </td><td class="markdownTableBodyNone">bool  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">int </td><td class="markdownTableBodyNone">dliteInt </td><td class="markdownTableBodyNone">1, 2, 4, {8} </td><td class="markdownTableBodyNone">signed integer </td><td class="markdownTableBodyNone">(int), int8, int16, int32, {int64}  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">uint </td><td class="markdownTableBodyNone">dliteUInt </td><td class="markdownTableBodyNone">1, 2, 4, {8} </td><td class="markdownTableBodyNone">unsigned integer </td><td class="markdownTableBodyNone">(uint), uint8, uint16, uint32, {uint64}  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">float </td><td class="markdownTableBodyNone">dliteFloat </td><td class="markdownTableBodyNone">4, 8, {10, 12, 16} </td><td class="markdownTableBodyNone">floating point </td><td class="markdownTableBodyNone">(float), (double), float32, float64, {float80, float96, float128}  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">fixstring </td><td class="markdownTableBodyNone">dliteFixString </td><td class="markdownTableBodyNone">any </td><td class="markdownTableBodyNone">fix-sized NUL-terminated string </td><td class="markdownTableBodyNone">string20, string4000, ...  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ref </td><td class="markdownTableBodyNone">dliteRef </td><td class="markdownTableBodyNone">sizeof(DLiteInstance*) </td><td class="markdownTableBodyNone">reference to another instance </td><td class="markdownTableBodyNone">ref, <a href="http://onto-ns.com/meta/0.1/MyEntity">http://onto-ns.com/meta/0.1/MyEntity</a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">string </td><td class="markdownTableBodyNone">dliteStringPtr </td><td class="markdownTableBodyNone">sizeof(char *) </td><td class="markdownTableBodyNone">pointer to NUL-terminated string </td><td class="markdownTableBodyNone">string  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">relation </td><td class="markdownTableBodyNone">dliteRelation </td><td class="markdownTableBodyNone">sizeof(DLiteRelation) </td><td class="markdownTableBodyNone">subject-predicate-object triplet </td><td class="markdownTableBodyNone">relation  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dimension </td><td class="markdownTableBodyNone">dliteDimension </td><td class="markdownTableBodyNone">sizeof(DLiteDimension) </td><td class="markdownTableBodyNone">only intended for metadata </td><td class="markdownTableBodyNone">dimension  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">property </td><td class="markdownTableBodyNone">dliteProperty </td><td class="markdownTableBodyNone">sizeof(DLiteProperty) </td><td class="markdownTableBodyNone">only intended for metadata </td><td class="markdownTableBodyNone">property  </td></tr>
</table>
<p>The examples shown in curly parenthesis may not be supported on all platforms. The size int, uint, float and double are platform-dependent. For portable applications you should to provide the number of bits, like int32, uint32, float32, float64, etc... Note that the size specification of <em>blob</em> and <em>fixstring</em> are in bytes (not bits) and that the terminating NUL-character <b>is</b> included in the specified size of the <em>fixstring</em> types.</p>
<h1>Instances, entities, metadata, meta-metadata, etc... </h1>
<p>A metadata structure following the concepts of SOFT and an API to work with it, is implemented in <a class="el" href="dlite-entity_8h.html" title="API for instances and entities.">dlite-entity.h</a> / dlite-entity.c and shown graphically in Figure 1.</p>
<p><img src="SOFT-metadata-structure.png" alt="Metadata structure" title="Figure 1. Metadata structure." class="inline"/></p>
<p>The actual data or <em>Data instances</em> are instances of the <em>Entity</em> describing them. <em>Entities</em> are instances of the <em>Entity schema</em> which describes an <em>Entity</em>. The <em>Entity schema</em> is an instance of the <em>Basic metadata schema</em> describing it, which can describe itself (and can be considered as an instance of itself). Hence, <b>everything is an instance</b>. So in contrast to SOFT, <em>entities</em> in DLite are just a special type of <em>metadata</em>.</p>
<p><em>Collections</em> are a special type of instances containing references to a set of set of instances and relationships between them. They are currently not yet implemented in dlite.</p>
<p>Instances can be subdivided into:</p>
<ul>
<li><p class="startli"><em>Data instances</em> containing actual data. These are serialised with a minimal header, only containing:</p><ul>
<li>The UUID identifying the instance.</li>
<li>An optional reference to an URI uniquely identifying the instance. If given, the UUID is derived from it.</li>
<li>A reference (URI) to its metadata.</li>
</ul>
<p class="startli">This header is then followed by then followed by the content, i.e. the size of each dimension and the values of each property.</p>
<p class="startli">A basic <code>DLiteInstance</code> type is defined that all data instances (including metadata) can be cast into.</p>
<p class="startli">In the figure above, the <em>Data instances</em> and the <em>Collections</em> are both examples of <em>pure instances</em>.</p>
</li>
<li><p class="startli">Metadata. Entities, Entity schema, Basic metadata schema, etc are all examples of metadata. Metadata is typically identified by an URI of the form <code>namespace/version/name</code>. When storing entities (as instances) an UUID will be derived from this URI.</p>
<p class="startli">A basic <code>DLiteMetadata</code> type is defined, that all metadata can be cast into. Since metadata also are instances, they header starts with the same header as DLiteInstance, but includes more fields needed to describe their instances. Entities are a special case of metadata, whos instances are the actual data.</p>
<p class="startli">All metadata is immutable.</p>
</li>
</ul>
<h1>Metadata semantics </h1>
<p>The semantics used to by any type of metadata to describe its instances contains three elements:</p>
<ul>
<li>dimensions</li>
<li>properties</li>
<li>relations</li>
</ul>
<p>The three first properties of all metadata schemas (metadata who's instances are metadata) must be "dimensions", "properties" and "relations" in this order. However, it is possible to omit "relations" if the metadata instance has no other properties.</p>
<h1>Naming dimensions and properties </h1>
<p>The names of your dimensions and properties should be valid C identifiers, not starting with underscore. Another restriction is that should not be one of the following keywords:</p>
<ul>
<li>uuid</li>
<li>uri</li>
<li>meta</li>
<li>iri</li>
</ul>
<p>Furthermore, while the following dimension and property names are actively used in metadata, they must not be used in data instances:</p>
<ul>
<li>ndimensions</li>
<li>nproperties</li>
<li>nrelations</li>
<li>dimensions</li>
<li>properties</li>
<li>relations</li>
</ul>
<hr  />
 </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
